<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>How to Make Testable Private Methods in JavaScript | Mike Ball</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="A controversial technique for writing unit tests against private methods."><meta name=generator content="Hugo 0.101.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel=stylesheet href=/main.min.43101f9fa16a173ab918363cb6d5b92e9321471b85fdc7d27df76d474d530401.css></head><body class=blog-post><header><div class=mark><a href=/>Mike Ball</a></div><button>Toggle Navigation</button><div class=nav-wrap><nav class=primary><ul><li><a href=/blog>Blog</a></li><li><a href=#about>About</a></li></ul></nav><nav class=secondary><ul><li><a href=https://github.com/mdb>GitHub</a></li><li><a href=/instagram>Instagram</a></li></ul></nav><nav class=tertiary><ul><li><a href=https://tiendah.bigcartel.com>Shop</a></li><li><a href=#about>Contact</a></li></ul></nav></div></header><main role=main><div class=blog-post><article><header><h1>How to Make Testable Private Methods in JavaScript</h1><time>May 11, 2011</time></header><div><p><strong>Problem</strong>: how to write unit tests for private functions?</p><p>As my co-worker Trevor <a href=http://trevmex.com/post/5365259743/a-javascript-template-for-making-testable-private>suggests in more detail</a>, one solution is to create a class with 3 internal objects:</p><ul><li><strong>settings</strong>: this object houses configuration options, such as a debug option</li><li><strong>private</strong>: this object houses private functions</li><li><strong>public</strong>: this object houses all public functions</li></ul><p>Then, in writing unit tests, a developer can instantiate the class by passing <code>{debug: true}</code> to adjust the class&rsquo;s settings such that the private and public objects are merged, in effect exposing the previously private functions housed in the private object.</p><p>Note that this technique is a bit controversial amongst those who argue that the need to test private functions hints at larger code problems, specifically that the private functions are too complex. Also note that it requires <code>jQuery</code>.</p><h2 id=example-code>Example Code</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>NS</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;undefined&#39;</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>NS</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>NS</span> <span style=color:#f92672>=</span> {};
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>$</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>NS</span>.<span style=color:#a6e22e>Klass</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>options</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>settings</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>debug</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Private Functions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    },
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Public Functions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>options</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>$</span>.<span style=color:#a6e22e>extend</span>(<span style=color:#a6e22e>settings</span>, <span style=color:#a6e22e>options</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>settings</span>.<span style=color:#a6e22e>debug</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>$</span>.<span style=color:#a6e22e>extend</span>({}, <span style=color:#66d9ef>private</span>, <span style=color:#66d9ef>public</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>public</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>}(<span style=color:#a6e22e>jQuery</span>));
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>myClass</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>NS</span>.<span style=color:#a6e22e>Klass</span>(); <span style=color:#75715e>// Regular usage
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>myDebugClass</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>NS</span>.<span style=color:#a6e22e>Klass</span>({<span style=color:#a6e22e>debug</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>}); <span style=color:#75715e>// Debug usage
</span></span></span></code></pre></div></div><ul class=tags><li><a href=/tags/javascript>javascript</a></li><li><a href=/tags/notes>notes</a></li><li><a href=/tags/tdd>tdd</a></li></ul></article></div></main><footer><section><h1 id=about>Info</h1><div><h2>Mike Ball</h2><p>I live in Philadelphia and work as a multi-disciplinary software engineer & designer.</p><p>Over the years, I've developed front end web applications, built
backend services, automated cloud infrastructure management, designed
CI/CD pipelines for high scale distributed systems, designed developer
platforms for large organizations, and contributed to numerous
open source software projects.</p><p>I've also worked in graphic and UX design. Buy prints of my illustrations at <a href=https://tiendah.bigcartel.com>Tiendah</a>.</div><div class=double><h2>Shop Tiendah</h2><ul class="gallery store-feed"></ul><h2>Instagram</h2><ul class="gallery ig-feed"></ul></div><div><h2>Etc.</h2><ul><li><a href=http://github.com/mdb>GitHub</a></li><li><a href=https://clapclapexcitement.bsky.social>Bluesky</a></li><li><a href=https://instagram.com/clapclapexcitement>Instagram</a></li><li><a href=/index.xml>RSS Feed</a></li><li><a href=https://tiendah.bigcartel.com>Shop Tiendah</a></li></ul><h2>Contact</h2><p>Interested in working with me? <a href=mailto:mikedball@gmail.com>Get in touch</a>.</p></div></section></footer><script type=text/javascript src=/js/main.min.d9f9d7ac9e770ec8ebd0ed00e9c29649dd4e2983ac88a739b263f3862d69e26d.js></script>
<script type=text/javascript>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-54324621-1","auto"),ga("send","pageview")</script></body></html>