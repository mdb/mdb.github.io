<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>IP addressing, Networks, Subnets, and CIDR | Mike Ball</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=generator content="Hugo 0.101.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=stylesheet href=/main.min.c73c613cfd4a64634c06e459f78deb1035b82aea547151bfe43de4da2704ee5d.css></head><body class=DEV><header><div class=mark><a href=/>Mike Ball</a></div><button>Toggle Navigation</button><div class=nav-wrap><nav class=primary><ul><li><a href=/blog>Blog</a></li><li><a href=#about>About</a></li></ul></nav><nav class=secondary><ul><li><a href=https://github.com/mdb>GitHub</a></li><li><a href=https://instagram.com/clapclapexcitement>Instagram</a></li></ul></nav><nav class=tertiary><ul><li><a href=https://tiendah.bigcartel.com>Shop</a></li><li><a href=#about>Contact</a></li></ul></nav></div></header><main role=main><div class=blog-post><aside class=divider><a href=/blog/>Blog</a></aside><time>November 11, 2022</time><article><header><h1>IP addressing, Networks, Subnets, and CIDR</h1></header><div><p><em>Working with IP addresses, networks, subnets, and <a href=https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing>CIDR</a> notation can be confusing. Intended as a resource for junior engineers &ndash; as well as my own personal notes &ndash; the following offers some overview, history, and an introduction to <code>ipcalc</code>.</em></p><p>Big disclaimer: I&rsquo;m not a network engineer :)</p><h2 id=ip-addresses>IP addresses</h2><p>An <em>internet protocal address</em> is a numerical label connected to a computer network that uses the <a href=https://en.wikipedia.org/wiki/Internet_Protocol>internet protocol</a> for communication. IP addresses serve two main functions:</p><ol><li>network interface identification</li><li>location addressing</li></ol><p>IP address space is managed globally by the Internet Assigned Numbers Authority (IANA), and by five regional internet registries (RIRs), each responsible in their designated territory for address assignment to local registries, such as Internet service providers (ISPs), and other entities.</p><h2 id=ip-address-routing>IP address routing</h2><p>IP addresses are grouped into four classes of operational characteristics:</p><ol><li>unicast<ul><li>refers to a single sender or a single receiver</li><li>most common usage</li><li>available to both IPv4 and IPv6</li></ul></li><li>broadcast<ul><li>address data to all possible destinations on a network in one transmission operation</li><li>available in IPv4; IPv6 does not implement this and instead replaces it with multicast to the special all-nodes multicast address</li></ul></li><li>multicast<ul><li>associated with a group of interested receivers</li><li>sender sends a single datagram from its unicast address to the multicast group address; intermediary routers make copies and send them to all interested receivers based on multicast group membership</li><li>IPv4 uses <code>224.0.0.0</code> - <code>239.255.255.255</code> (the former class D addresses) as multicast addresses</li><li>IPv6 uses the address block with the prefix <code>ff00::/8</code> for multicast</li></ul></li><li>anycast<ul><li>one-to-many routing (similar to broadcast and multicast), though the data stream is only transmitted to the receiver determined by the router to be closest</li><li>useful in global load balancing and DNS</li></ul></li></ol><h2 id=classless-inter-domain-routing-cidr>Classless Inter-Domain Routing (CIDR)</h2><p>CIDR defines how many addresses are in a network block; it&rsquo;s essentially a method for allocating IP addresses and for IP routing. It was created by the <em>Internet Engineering Task Force</em> in 1993 to replace the internet&rsquo;s previous <em>classful</em> addressing architecture and introduced the <em>CIDR notation</em> method for representing IP addresses.</p><p>By comparison, <em>classful</em> networking was the old school pre-CIDR model that used to align with how IANA doled out public IP address space: companies like Comcast got a Class A, schools and government agencies got a B, and small ISPs or SMBs got a C (or multiple Cs), for example. They correspond to the CIDR lengths <code>/8</code>, <code>/16</code>, <code>/24</code>. Additionally, class D represents the multicast class, and class E is experimental and reserved for future use (though may never be used, given the advent of IPv6). CIDR is the newer means of allocating smaller chunks of space (or chunks of IP address space that don&rsquo;t align on class A/B/C boundaries, anyways).</p><p>CIDR notation represents an IP address or routing prefix, and denotes the routing prefix&rsquo;s size by suffixing the address with the number of bits. For example: <code>192.0.2.0/24</code> (equivalent to the historically used subnet mask <code>255.255.255.0</code>) for IPv4, and <code>2001:db8::/32</code> for IPv6.</p><h2 id=lets-focus-on-ipv4>Let&rsquo;s focus on IPv4</h2><p>IPv4 addresses may be in any notation expressing a 32-bit integer value. However, for human convenience, IP4 addresses are often represented in dot-decimal notation, which consists of four octets of the address expressed individually in decimal and separated by periods. Each octet consists of 8 bits giving a value between 0 and 255. What we talk about when we refer to a &ldquo;dotted-decimal quad&rdquo; IPv4 address is really a 32-bit integer to the computer. The number after the <code>/</code> (i.e. <code>192.168.1.0/24</code>) denotes the number of bits out of 32 used to describe the network range. In other words, an IP address followed by a <code>/</code> and a number indicates a block of addresses.</p><h2 id=private-networks>Private networks</h2><p>The <a href=https://datatracker.ietf.org/doc/html/rfc1918>RFC 1918</a> &ldquo;reserved private&rdquo; ranges are called &ldquo;class A, B, C&rdquo; vestigally because they happen to be sized like the old school, pre-CIDR classfull A, B, and C ranges allocated by IANA.</p><ul><li>Class A - <code>10.0.0.0/8</code></li><li>Class B - <code>172.16.0.0/12</code></li><li>Class C - <code>192.168.0.0/16</code></li></ul><p>Admins can use RFC 1918 addresses however they like. However, they must agree within a network&rsquo;s boundaries and packets with those RFC 1918 source or destination addresses are not directly sendable over the internet (at least not without encapsulation, such as tunneling/VPN).</p><p>By convention, it&rsquo;s common for network admins to use the <code>10.0.0.0/8</code> class A block for corporate internal WAN, becuase its large size allows for slicing/dicing and delegation to LAN admins.</p><p>Source network address translation (SNAT) and destination network address translation (DNAT) are the common means of translating RFC 1918 addresses into something that can travel over the internet. SNAT translates a source IP address when connecting from a private IP address to a public IP address, and is the most common form of NAT used when a private host needs to connect to an external or public host. Conversely, DNAT translates a destination IP address when connecting from a public IP address to a private IP address, and is generally used to redirect a packets destined for a specific IP address to a different IP address.</p><h2 id=ipcalc>ipcalc</h2><p>As an introduction, let&rsquo;s examine <code>192.168.0.133</code> via <code>ipcalc</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>ipcalc 192.168.0.133
</span></span><span style=display:flex><span>Address:   192.168.0.133        11000000.10101000.00000000. 10000101
</span></span><span style=display:flex><span>Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
</span></span><span style=display:flex><span>Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
</span></span><span style=display:flex><span>=&gt;
</span></span><span style=display:flex><span>Network:   192.168.0.0/24       11000000.10101000.00000000. 00000000
</span></span><span style=display:flex><span>HostMin:   192.168.0.1          11000000.10101000.00000000. 00000001
</span></span><span style=display:flex><span>HostMax:   192.168.0.254        11000000.10101000.00000000. 11111110
</span></span><span style=display:flex><span>Broadcast: 192.168.0.255        11000000.10101000.00000000. 11111111
</span></span><span style=display:flex><span>Hosts/Net: 254                   Class C, Private Internet
</span></span></code></pre></div><p>Based on <code>ipcalc</code>&rsquo;s output, we learn&mldr;</p><ul><li><code>192.168.0.133</code> falls within a network, represented in CIDR notation as <code>192.168.0.0/24</code>.</li><li><code>192.168.0.133</code> (and the other IPs in its <code>192.168.0.0/24</code> network) is a &ldquo;Class C, Private Internet&rdquo; address, indicating it lives within the RFC 1918 &ldquo;reserved private&rdquo; class C block (see &ldquo;Private networks&rdquo; below for more on <a href=https://datatracker.ietf.org/doc/html/rfc1918>RFC 1918</a> addresses).</li><li><code>192.168.0.1</code> is the first host in the network.</li><li><code>192.168.0.254</code> is the last host in the network.</li><li>Note that the first value in the host field, 0, is always reserved as the network address. The network address identifies the network segment (the last bits in the network address must be zeros)</li><li>The last value in the host field, 255, is always reserved for the broadcast address. The broadcast address is used for addressing all the nodes in the network at the same time.</li><li>Disincluding the network address and broadcast addresses, the <code>192.168.0.0/24</code> network includes 254 individual host addresses (rather than 256).</li><li><code>255.255.255.0</code> is the <em>netmask</em> (Or, depending on context, the <em>subnet mask</em>). For IPv4, in addition to a CIDR notation, a network may also be characterized by its subnet mask or netmask, which is the <a href=https://en.wikipedia.org/wiki/Mask_(computing)>bitmask</a> that, when applied by a <a href=https://en.wikipedia.org/wiki/Bitwise_operation#AND>bitwise <code>AND</code></a> operation to any IP address in the network, yields the routing prefix.</li><li>The 24-bit netmask (represented by <code>/24</code>) covers the first 3 quads, which make up the network ID, while the last quad is the host address.</li></ul><p>Also note the right column in the output above, which shows each octet&rsquo;s 8 bit binary value. For example, the <code>11000000.10101000.00000000. 10000101</code> in the output&rsquo;s first line:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>ipcalc 192.168.0.133
</span></span><span style=display:flex><span>Address:   192.168.0.133        11000000.10101000.00000000. 10000101
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p><a href=https://cidr.xyz/>cidr.xyz</a> is a good tool for visualizing this, too.</p><p>According to <code>ipcalc --help</code>&mldr;</p><blockquote><p>Look at the space between the bits of the addresses: The bits before it are the network part of the address, the bits after it are the host part. You can see two simple facts: In a network address all host bits are zero, in a broadcast address they are all set.</p></blockquote><p>With that in mind, let&rsquo;s re-examine the far right column of <code>ipcalc</code> output. Note the addresses where the host bits are all zero. Note the addresses where the host bits are all set:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>ipcalc 192.168.0.133
</span></span><span style=display:flex><span>Address:   192.168.0.133        11000000.10101000.00000000. 10000101
</span></span><span style=display:flex><span>Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
</span></span><span style=display:flex><span>Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
</span></span><span style=display:flex><span>=&gt;
</span></span><span style=display:flex><span>Network:   192.168.0.0/24       11000000.10101000.00000000. 00000000
</span></span><span style=display:flex><span>HostMin:   192.168.0.1          11000000.10101000.00000000. 00000001
</span></span><span style=display:flex><span>HostMax:   192.168.0.254        11000000.10101000.00000000. 11111110
</span></span><span style=display:flex><span>Broadcast: 192.168.0.255        11000000.10101000.00000000. 11111111
</span></span><span style=display:flex><span>Hosts/Net: 254                   Class C, Private Internet
</span></span></code></pre></div><p>To examine your own public IP address:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>ipcalc $(curl ifconfig.me/ip)
</span></span></code></pre></div><h2 id=subnets>Subnets</h2><p><code>ipcalc</code> can also assist in granularly subdividing networks into multiple subnets, as is common when logically subdividing private networks.</p><p>For example, let&rsquo;s attempt to carve out a subnet composed of 15 addresses from <code>172.20.1.0/24</code> (itself a class B private network block):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>ipcalc 172.20.1.0/24 --split 15
</span></span><span style=display:flex><span>Address:   172.20.1.0           10101100.00010100.00000001. 00000000
</span></span><span style=display:flex><span>Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
</span></span><span style=display:flex><span>Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
</span></span><span style=display:flex><span>=&gt;
</span></span><span style=display:flex><span>Network:   172.20.1.0/24        10101100.00010100.00000001. 00000000
</span></span><span style=display:flex><span>HostMin:   172.20.1.1           10101100.00010100.00000001. 00000001
</span></span><span style=display:flex><span>HostMax:   172.20.1.254         10101100.00010100.00000001. 11111110
</span></span><span style=display:flex><span>Broadcast: 172.20.1.255         10101100.00010100.00000001. 11111111
</span></span><span style=display:flex><span>Hosts/Net: 254                   Class B, Private Internet
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1. Requested size: 15 hosts
</span></span><span style=display:flex><span>Netmask:   255.255.255.224 = 27 11111111.11111111.11111111.111 00000
</span></span><span style=display:flex><span>Network:   172.20.1.0/27        10101100.00010100.00000001.000 00000
</span></span><span style=display:flex><span>HostMin:   172.20.1.1           10101100.00010100.00000001.000 00001
</span></span><span style=display:flex><span>HostMax:   172.20.1.30          10101100.00010100.00000001.000 11110
</span></span><span style=display:flex><span>Broadcast: 172.20.1.31          10101100.00010100.00000001.000 11111
</span></span><span style=display:flex><span>Hosts/Net: 30                    Class B, Private Internet
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Needed size:  32 addresses.
</span></span><span style=display:flex><span>Used network: 172.20.1.0/27
</span></span><span style=display:flex><span>Unused:
</span></span><span style=display:flex><span>172.20.1.32/27
</span></span><span style=display:flex><span>172.20.1.64/26
</span></span><span style=display:flex><span>172.20.1.128/25
</span></span></code></pre></div><p>Based on <code>ipcalc</code>&rsquo;s output, we learn&mldr;</p><ul><li><code>172.20.1.0/24</code> (the original block) is itself composed of 254 hosts</li><li><code>172.20.1.0/27</code> offers a 30 host subnet meeting our needs (and providing adequate headroom to grow via twice the hosts we currently need)</li><li>this leaves 3 additional subnets of available IPs: <code>172.20.1.32/27</code> (30 hosts), <code>172.20.1.64/26</code> (62 hosts), <code>172.20.1.128/25</code> (126 hosts)</li></ul><p>Alternatively, let&rsquo;s attempt to carve out 2 subnets of 15 and 62 hosts, respectively, from the original <code>172.20.1.0/24</code> block:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>$ ipcalc 172.20.1.0/24 --split 15 62
</span></span><span style=display:flex><span>Address:   172.20.1.0           10101100.00010100.00000001. 00000000
</span></span><span style=display:flex><span>Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
</span></span><span style=display:flex><span>Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
</span></span><span style=display:flex><span>=&gt;
</span></span><span style=display:flex><span>Network:   172.20.1.0/24        10101100.00010100.00000001. 00000000
</span></span><span style=display:flex><span>HostMin:   172.20.1.1           10101100.00010100.00000001. 00000001
</span></span><span style=display:flex><span>HostMax:   172.20.1.254         10101100.00010100.00000001. 11111110
</span></span><span style=display:flex><span>Broadcast: 172.20.1.255         10101100.00010100.00000001. 11111111
</span></span><span style=display:flex><span>Hosts/Net: 254                   Class B, Private Internet
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1. Requested size: 15 hosts
</span></span><span style=display:flex><span>Netmask:   255.255.255.224 = 27 11111111.11111111.11111111.111 00000
</span></span><span style=display:flex><span>Network:   172.20.1.64/27       10101100.00010100.00000001.010 00000
</span></span><span style=display:flex><span>HostMin:   172.20.1.65          10101100.00010100.00000001.010 00001
</span></span><span style=display:flex><span>HostMax:   172.20.1.94          10101100.00010100.00000001.010 11110
</span></span><span style=display:flex><span>Broadcast: 172.20.1.95          10101100.00010100.00000001.010 11111
</span></span><span style=display:flex><span>Hosts/Net: 30                    Class B, Private Internet
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>2. Requested size: 62 hosts
</span></span><span style=display:flex><span>Netmask:   255.255.255.192 = 26 11111111.11111111.11111111.11 000000
</span></span><span style=display:flex><span>Network:   172.20.1.0/26        10101100.00010100.00000001.00 000000
</span></span><span style=display:flex><span>HostMin:   172.20.1.1           10101100.00010100.00000001.00 000001
</span></span><span style=display:flex><span>HostMax:   172.20.1.62          10101100.00010100.00000001.00 111110
</span></span><span style=display:flex><span>Broadcast: 172.20.1.63          10101100.00010100.00000001.00 111111
</span></span><span style=display:flex><span>Hosts/Net: 62                    Class B, Private Internet
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Needed size:  96 addresses.
</span></span><span style=display:flex><span>Used network: 172.20.1.0/25
</span></span><span style=display:flex><span>Unused:
</span></span><span style=display:flex><span>172.20.1.96/27
</span></span><span style=display:flex><span>172.20.1.128/25
</span></span></code></pre></div><h2 id=additional-features>Additional features</h2><p>Deaggregate an IP range into a CIDR:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>ipcalc 1.2.168.0 - 1.2.169.255
</span></span><span style=display:flex><span>deaggregate 1.2.168.0 - 1.2.169.255
</span></span><span style=display:flex><span>1.2.168.0/23
</span></span></code></pre></div><h2 id=ipv6>IPv6</h2><p>Much of the above focuses on IPv4. Note that IPv6 is its own beast, and that <code>ipcalcv6</code> is a thing.</p><h2 id=futher-reading>Futher reading</h2><ul><li><a href=https://gist.github.com/LuoZijun/df2d57ab6f5217a4bd18>https://gist.github.com/LuoZijun/df2d57ab6f5217a4bd18</a></li><li><a href=https://github.com/nmav/ipcalc>https://github.com/nmav/ipcalc</a></li><li><a href=https://www.linux.com/topic/networking/how-calculate-network-addresses-ipcalc/>https://www.linux.com/topic/networking/how-calculate-network-addresses-ipcalc/</a></li></ul></div><ul class=tags><li><a href=/tags/networking>networking</a></li><li><a href=/tags/ip>ip</a></li><li><a href=/tags/ipcalc>ipcalc</a></li><li><a href=/tags/infrastructure-engineering>infrastructure engineering</a></li></ul></article></div></main><footer><section><h1 id=about>Info</h1><div><h2>Mike Ball</h2><p>I live in Philadelphia and work as a multi-disciplinary software engineer & designer.</p><p>Over the years, I've developed front end UIs, server backends, automated cloud infrastructure provisioning, built continuous deployment pipelines for highly available applications, and contributed to numerous open source software projects.</p><p>I've also worked in graphic and UX design. Buy prints of my illustrations at <a href=https://tiendah.bigcartel.com>Tiendah</a>.</div><div class=double><h2>Shop Tiendah</h2><ul class="gallery store-feed"></ul><h2>Instagram</h2><ul class="gallery ig-feed"></ul></div><div><h2>Etc.</h2><ul><li><a href=http://github.com/mdb>GitHub</a></li><li><a href=http://twitter.com/clapexcitement>Twitter</a></li><li><a href=https://instagram.com/clapclapexcitement>Instagram</a></li><li><a href=/index.xml>RSS Feed</a></li><li><a href=https://tiendah.bigcartel.com>Shop Tiendah</a></li></ul><h2>Contact</h2><p>Interested in working with me? <a href=mailto:mikedball@gmail.com>Get in touch</a>.</p></div></section></footer><script type=text/javascript src=/js/main.min.da52d8ec13bd557c9a5cee7d197a95ba9bbe47f8ba6e93b2a4ac2ca9ac18b707.js></script></body></html>