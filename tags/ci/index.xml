<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ci on Mike Ball</title><link>/tags/ci/</link><description>Recent content in Ci on Mike Ball</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Wed, 07 Jul 2021 00:00:00 +0000</lastBuildDate><atom:link href="/tags/ci/index.xml" rel="self" type="application/rss+xml"/><item><title>Multi-stage Docker Builds</title><link>/blog/multi-stage-docker-builds/</link><pubDate>Wed, 07 Jul 2021 00:00:00 +0000</pubDate><guid>/blog/multi-stage-docker-builds/</guid><description>&lt;p&gt;&lt;em&gt;An introduction to leveraging multi-stage container image builds.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id="problem"&gt;Problem&lt;/h2&gt;
&lt;p&gt;Your application is deployed via a minimal &lt;a href="https://opencontainers.org/"&gt;OCI&lt;/a&gt; image, such as one produced by a &lt;a href="https://docs.docker.com/engine/reference/commandline/build/"&gt;Docker build&lt;/a&gt;. However, its build and test pipeline consists of many stages, each of which utilizes disparate technologies, system dependencies, and testing techniques. Consistently managing the build pipeline &amp;ndash; and its dependencies &amp;ndash; across local development environments and CI/CD systems is complicated. Perhaps its configuration and dependency management is spread across &lt;a href="https://docs.npmjs.com/cli/v7/configuring-npm/package-json#scripts"&gt;package.json&lt;/a&gt; scripts, &lt;a href="https://stackoverflow.com/questions/2270643/what-is-a-make-target/2270701"&gt;Make&lt;/a&gt; targets, &lt;a href="https://github.com/features/actions"&gt;Github Actions&lt;/a&gt; YML, a &lt;a href="https://www.jenkins.io/doc/book/pipeline/jenkinsfile/"&gt;Jenkinsfile&lt;/a&gt;, a &lt;a href="https://brew.sh/"&gt;homebrew&lt;/a&gt; &lt;code&gt;Brewfile&lt;/code&gt;, a &lt;code&gt;Dockerfile&lt;/code&gt;, and/or Linux package managers with no consistent entrypoint.&lt;/p&gt;</description></item><item><title>Transforming Terraform Output Values to Markdown with Terraputs</title><link>/blog/transforming-terraform-output-values-to-markdown-with-terraputs/</link><pubDate>Fri, 02 Jul 2021 00:00:00 +0000</pubDate><guid>/blog/transforming-terraform-output-values-to-markdown-with-terraputs/</guid><description>&lt;p&gt;&lt;em&gt;An introduction to using a tool I wrote, &lt;a href="https://github.com/mdb/terraputs"&gt;&lt;code&gt;terraputs&lt;/code&gt;&lt;/a&gt;, to transform Terraform configuration &lt;a href="https://www.terraform.io/docs/language/values/outputs.html"&gt;output values&lt;/a&gt; to markdown. I owe a hat tip to my colleagues &lt;a href="https://github.com/justinlarose"&gt;Justin LaRose&lt;/a&gt; and &lt;a href="https://github.com/trumant"&gt;Travis Truman&lt;/a&gt; for giving me the idea to create &lt;code&gt;terraputs&lt;/code&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id="problem"&gt;Problem&lt;/h2&gt;
&lt;p&gt;You&amp;rsquo;d like to publish your &lt;a href="https://terraform.io"&gt;Terraform&lt;/a&gt; configuration&amp;rsquo;s up-to-date &lt;a href="https://www.terraform.io/docs/language/values/outputs.html"&gt;output values&lt;/a&gt; in a human-friendly, easy-to-read, accessible format. Perhaps you&amp;rsquo;d like to publish their current values to your project&amp;rsquo;s &lt;code&gt;README.md&lt;/code&gt;, a wiki, or some other form of documentation.&lt;/p&gt;
&lt;h2 id="solution"&gt;Solution&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/mdb/terraputs"&gt;terraputs&lt;/a&gt; is a minimal CLI tool I created to print Terraform output values as &lt;a href="https://www.markdownguide.org"&gt;markdown&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>Triggering GitHub Actions From Outside of GitHub</title><link>/blog/triggering-github-actions-from-outside-of-github/</link><pubDate>Thu, 01 Jul 2021 00:00:00 +0000</pubDate><guid>/blog/triggering-github-actions-from-outside-of-github/</guid><description>&lt;p&gt;&lt;em&gt;An introduction to using custom repository dispatch events to trigger GitHub Actions from outside of GitHub.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Often, &lt;a href="https://docs.github.com/en/actions"&gt;GitHub Actions&lt;/a&gt; are configured to trigger in response to common &lt;a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows"&gt;GitHub events&lt;/a&gt;, such as pushing a git commit, opening a pull request, or creating a git tag. But how can GitHub Actions workflows be triggered from events outside of GitHub? GitHub&amp;rsquo;s &lt;a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#repository_dispatch"&gt;&lt;code&gt;repository_dispatch&lt;/code&gt;&lt;/a&gt; event offers a solution.&lt;/p&gt;
&lt;h2 id="a-basic-example"&gt;A basic example&lt;/h2&gt;
&lt;p&gt;First, create a &lt;code&gt;.github/workflows/repo_dispatch_example.yml&lt;/code&gt; file (the name is arbitrary, though its location and &lt;code&gt;.yml&lt;/code&gt; extension do matter):&lt;/p&gt;</description></item><item><title>Testing Ansible Roles With Docker-in-Docker</title><link>/blog/testing-ansible-roles-with-docker-in-docker/</link><pubDate>Sun, 29 Nov 2020 00:00:00 +0000</pubDate><guid>/blog/testing-ansible-roles-with-docker-in-docker/</guid><description>&lt;p&gt;&lt;em&gt;A brief guide and reference example explaining a technique for using Molecule and a Docker-in-Docker dev/test environment to test Ansible roles&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id="problem"&gt;Problem&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://www.ansible.com/"&gt;Ansible&lt;/a&gt; encourages the use of &lt;a href="https://github.com/ansible-community/molecule"&gt;Molecule&lt;/a&gt; to test Ansible roles &amp;ldquo;against multiple instances, operating systems and distributions, virtualization providers, test frameworks, and testing scenarios.&amp;rdquo; &lt;a href="https://molecule.readthedocs.io/en/latest/getting-started.html"&gt;Molecule documentation&lt;/a&gt; offers an overview of how to get started, including how to use &lt;a href="https://docker.io"&gt;Docker&lt;/a&gt; as the test driver provider, as well as how to use Ansible as the &lt;a href="https://molecule.readthedocs.io/en/latest/configuration.html#verifier"&gt;Molecule verifier&lt;/a&gt;. But what if you&amp;rsquo;d like to &lt;em&gt;also&lt;/em&gt; use Docker as your development environment, thus avoiding the need to install any dependencies — Python, Ansible, Molecule, etc. — beyond Docker itself? Or what if the relevant CI/CD pipeline steps run in a container, as is the case with a &lt;a href="https://concourse-ci.org/tasks.html"&gt;Concourse task&lt;/a&gt;, for example?&lt;/p&gt;</description></item><item><title>How to Make a Concourse Resource Type</title><link>/blog/how-to-make-a-concourse-resource-type/</link><pubDate>Tue, 29 Oct 2019 00:00:00 +0000</pubDate><guid>/blog/how-to-make-a-concourse-resource-type/</guid><description>&lt;p&gt;&lt;em&gt;My notes and thoughts on Concourse resource types and when and how to build and test your own resource types&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id="context-and-background"&gt;Context and background&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;Resources&lt;/em&gt; are a core concept in &lt;a href="https://concourse-ci.org"&gt;Concourse&lt;/a&gt; CI/CD pipelines. A &lt;a href="https://concourse-ci.org/resources.html"&gt;resource&lt;/a&gt; is any entity that Concourse can check for new versions, fetch at a specific version, and/or push up changes to idempotently create new versions. In this sense, a resource &amp;ldquo;version&amp;rdquo; is a specific form of a resource that differs from earlier forms, such as a particular commit on a git repository or a particular build artifact object in an AWS S3 bucket. This may sound vague, but it&amp;rsquo;s an arguably compelling feature. Because Concourse&amp;rsquo;s notion of resources offers users a generic way to extend Concourse functionality &amp;ndash; and because Concourse supports the use of custom &lt;a href="https://concourse-ci.org/implementing-resource-types.html"&gt;resource-type implementations&lt;/a&gt; &amp;ndash; resources serve as a useful tool in building Concourse CI/CD pipelines. Pipeline authors can leverage Concourse&amp;rsquo;s built-in resource types, use community-maintained resource types, or create new functionality through their own, custom resource types. And each implementation &amp;ndash; whether it&amp;rsquo;s a built-in resource type, a community-maintained resource type, or a custom, in-house resource type &amp;ndash; is itself packaged and versioned software with its own build/test/release CI/CD lifecycle. In this sense, resource types emerge as an interesting model through which the the units of CI/CD pipeline functionality can be maintained and distributed as first class software projects, and not just ad hoc scripts and untested glue code, as has been historically common.&lt;/p&gt;</description></item><item><title>How to Test Google Polymer elements on Travis CI</title><link>/blog/how-to-test-google-polymer-elements-on-travis-ci/</link><pubDate>Sat, 06 Jun 2015 00:00:00 +0000</pubDate><guid>/blog/how-to-test-google-polymer-elements-on-travis-ci/</guid><description>&lt;p&gt;Problem: how do you design a cloud-based continuous integration pipeline if your automated application tests relies on technology that requires a GUI, or an actual web browser? &lt;a href="https://www.polymer-project.org"&gt;Google Polymer&lt;/a&gt; heavily leverages &lt;a href="https://w3c.github.io/webcomponents/spec/shadow/"&gt;Shadow DOM&lt;/a&gt;, a feature that&amp;rsquo;s not currently supported in headless JavaScript environments like &lt;a href="http://phantomjs.org/"&gt;PhantomJS&lt;/a&gt;. My &lt;a href="http://github.com/mdb/polymer-testing-box"&gt;polymer-testing-box&lt;/a&gt; demonstrate how to run such tests via &lt;a href="http://en.wikipedia.org/wiki/Xvfb"&gt;Xvfb&lt;/a&gt; on a headless Ubuntu VM. Can this technique be used on &lt;a href="http://travis-ci.org"&gt;Travis CI&lt;/a&gt;?&lt;/p&gt;
&lt;p&gt;Travis CI supports Xvfb and Firefox. Travis offers &lt;a href="http://docs.travis-ci.com/user/gui-and-headless-browsers/"&gt;documentation&lt;/a&gt; on leveraging these technologies in its CI environment.&lt;/p&gt;</description></item></channel></rss>