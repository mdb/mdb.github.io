<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ruby on Mike Ball</title><link>/tags/ruby/</link><description>Recent content in Ruby on Mike Ball</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Fri, 15 Apr 2016 00:00:00 +0000</lastBuildDate><atom:link href="/tags/ruby/index.xml" rel="self" type="application/rss+xml"/><item><title>Using OptionParser in Rake</title><link>/blog/using-optionparser-in-rake/</link><pubDate>Fri, 15 Apr 2016 00:00:00 +0000</pubDate><guid>/blog/using-optionparser-in-rake/</guid><description>&lt;p&gt;Problem: you&amp;rsquo;d like to leverage named arguments in your Ruby &lt;code&gt;Rake&lt;/code&gt; task.&lt;/p&gt;
&lt;p&gt;Solution: use &lt;code&gt;OptionParser&lt;/code&gt; to parse the named arguments. Note the need to &lt;em&gt;also&lt;/em&gt; call &lt;code&gt;#OptionParser#order!(ARGV)&lt;/code&gt;, which is often absent from internet documentation.&lt;/p&gt;
&lt;p&gt;This example uses Ruby &lt;code&gt;2.2.2&lt;/code&gt; and Rake &lt;code&gt;11.1.2&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;require &lt;span style="color:#e6db74"&gt;&amp;#39;optparse&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;task &lt;span style="color:#e6db74"&gt;:hello&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options &lt;span style="color:#f92672"&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name: &lt;span style="color:#e6db74"&gt;&amp;#39;world&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; o &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;OptionParser&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; o&lt;span style="color:#f92672"&gt;.&lt;/span&gt;banner &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Usage: rake hello [options]&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; o&lt;span style="color:#f92672"&gt;.&lt;/span&gt;on(&lt;span style="color:#e6db74"&gt;&amp;#39;-n NAME&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;--name NAME&amp;#39;&lt;/span&gt;) { &lt;span style="color:#f92672"&gt;|&lt;/span&gt;name&lt;span style="color:#f92672"&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options&lt;span style="color:#f92672"&gt;[&lt;/span&gt;&lt;span style="color:#e6db74"&gt;:name&lt;/span&gt;&lt;span style="color:#f92672"&gt;]&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; name
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# return `ARGV` with the intended arguments&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; args &lt;span style="color:#f92672"&gt;=&lt;/span&gt; o&lt;span style="color:#f92672"&gt;.&lt;/span&gt;order!(&lt;span style="color:#66d9ef"&gt;ARGV&lt;/span&gt;) {}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; o&lt;span style="color:#f92672"&gt;.&lt;/span&gt;parse!(args)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; puts &lt;span style="color:#e6db74"&gt;&amp;#34;hello &lt;/span&gt;&lt;span style="color:#e6db74"&gt;#{&lt;/span&gt;options&lt;span style="color:#f92672"&gt;[&lt;/span&gt;&lt;span style="color:#e6db74"&gt;:name&lt;/span&gt;&lt;span style="color:#f92672"&gt;]&lt;/span&gt;&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Usage:&lt;/p&gt;</description></item><item><title>Rails API Integration Tests</title><link>/blog/rails-api-integration-tests/</link><pubDate>Thu, 17 Apr 2014 00:00:00 +0000</pubDate><guid>/blog/rails-api-integration-tests/</guid><description>&lt;p&gt;A web-services-oriented architecture encourages the development of multiple, modular applications over maintaining a single large, all-in-one monolithic piece of software. Often, the web services paradigm involves the development of clients apps that rely upon third party RESTful web services. Labor and responsibilities are divided and conquered across smaller, more manageable codebases and teams. But how can such a client application verify graceful integration? With a large user-base, such insight is increasingly critical.&lt;/p&gt;</description></item><item><title>A Simple Ruby Class Example</title><link>/blog/a-simple-ruby-class-example/</link><pubDate>Sun, 30 Mar 2014 00:00:00 +0000</pubDate><guid>/blog/a-simple-ruby-class-example/</guid><description>&lt;p&gt;Some colleagues asked about basic Ruby examples. The following RemoteConfig class makes an HTTP request and provides an object-oriented interface to XML served at the URL requested. The class serves as simple intro to some common needs and Ruby-oriented language features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;dynamic method definition&lt;/li&gt;
&lt;li&gt;performing GET requests over HTTPS&lt;/li&gt;
&lt;li&gt;creating a basic, object-oriented interface&lt;/li&gt;
&lt;li&gt;parsing attribute-heavy XML with XPATH queries&lt;/li&gt;
&lt;li&gt;testing with &lt;a href="http://rspec.info/"&gt;Rspec&lt;/a&gt; and &lt;a href="https://github.com/bblimke/webmock"&gt;Webmock&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="the-xml"&gt;The XML&lt;/h2&gt;
&lt;p&gt;Assume the following XML is hosted at &lt;a href="https://somedomain.com/config.xml"&gt;https://somedomain.com/config.xml&lt;/a&gt;:&lt;/p&gt;</description></item><item><title>wp2middleman</title><link>/projects/wp2middleman/</link><pubDate>Wed, 15 Jan 2014 00:00:00 +0000</pubDate><guid>/projects/wp2middleman/</guid><description>&lt;p&gt;wp2middleman is a Ruby gem that migrates the Wordpress posts in a Wordpress XML export file to &lt;a href="http://middlemanapp.com"&gt;middleman-style&lt;/a&gt; markdown files.&lt;/p&gt;
&lt;p&gt;wp2middleman provides a &lt;code&gt;wp2mm&lt;/code&gt; commandline executable, as well as a WP2Middleman module.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://github.com/mdb/wp2middleman"&gt;View source and documentation on Github »&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Lobber</title><link>/projects/lobber/</link><pubDate>Tue, 01 Oct 2013 00:00:00 +0000</pubDate><guid>/projects/lobber/</guid><description>&lt;p&gt;Lobber is a simple command line utility used to quickly upload a directory to &lt;a href="http://aws.amazon.com/s3/"&gt;Amazon S3&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Lobber is built with Ruby and can be downloaded from &lt;a href="http://rubygems.org/gems/lobber"&gt;Rubygems&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://github.com/mdb/lobber"&gt;View its source code on GitHub »&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Streamlined Rails Gem Updates on Gem in a Box</title><link>/blog/streamlined-rails-gem-updates-on-gem-in-a-box/</link><pubDate>Mon, 11 Feb 2013 00:00:00 +0000</pubDate><guid>/blog/streamlined-rails-gem-updates-on-gem-in-a-box/</guid><description>&lt;p&gt;&lt;strong&gt;Problem&lt;/strong&gt;: Per recent Ruby on Rails security patches, you need to update your Rails applications. However, because you host Rails and its related gems on a private &lt;a href="https://github.com/cwninja/geminabox"&gt;Gem in a Box&lt;/a&gt; gem server, it’s a bit cumbersome to manually download the necessary gems from &lt;a href="http://rubygems.org"&gt;Rubygems.org&lt;/a&gt;, and then upload them to your Gem in a Box gem server.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Solution&lt;/strong&gt;: bash and curl.&lt;/p&gt;
&lt;p&gt;&lt;b&gt;1.&lt;/b&gt; List the necessary gems in a &lt;code&gt;gems.txt&lt;/code&gt; file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rails
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;actionmailer
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;activemodel
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;actionview
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;actionpack
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;activerecord
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;activeresource
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;activesupport
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;railties
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;2.&lt;/b&gt; Create a bash script in a &lt;code&gt;get_gems.sh&lt;/code&gt; file to retrieve the gems from Rubygems.org. Note that I’ve created a &lt;code&gt;VERSION&lt;/code&gt; variable specifying the desired gems’ version.&lt;/p&gt;</description></item><item><title>Using the phl_geocode Ruby Gem</title><link>/blog/using-the-phl_geocode-ruby-gem/</link><pubDate>Mon, 17 Dec 2012 00:00:00 +0000</pubDate><guid>/blog/using-the-phl_geocode-ruby-gem/</guid><description>&lt;p&gt;I recently released &lt;a href="http://github.com/mdb/phl_geocode.rb"&gt;phl_geocode&lt;/a&gt;, a simple Ruby gem which gets latitude and longitude coordinates for a Philadelphia address.&lt;/p&gt;
&lt;h2 id="getting-started"&gt;Getting Started&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Install &lt;code&gt;phl_geocode&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;gem install phl_geocode
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Require &lt;code&gt;phl_geocode&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;require &lt;span style="color:#e6db74"&gt;&amp;#34;phl_geocode&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Instantiate a &lt;code&gt;PHLGeocode&lt;/code&gt; instance:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;phl &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;PHLGeocode&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;new
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Get latitude/longitude coordinates for a Philadelphia address:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;phl&lt;span style="color:#f92672"&gt;.&lt;/span&gt;get_coordinates &lt;span style="color:#e6db74"&gt;&amp;#34;1500 market street&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Example response:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;:address&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;1500 MARKET ST&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;:similarity&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;100&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;:latitude&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;39&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;9521740263203&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;:longitude&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;75&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1661518986459&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}, {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;:address&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;1500S MARKET ST&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;:similarity&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;99&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;:latitude&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;39&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;9521740263203&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;:longitude&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;75&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1661518986459&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Lobbying.ph</title><link>/blog/lobbying.ph/</link><pubDate>Mon, 05 Mar 2012 00:00:00 +0000</pubDate><guid>/blog/lobbying.ph/</guid><description>&lt;p&gt;&lt;em&gt;Update: Casey Thomas migrated the original Lobbing.ph to Django and extended its functionality.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://twitter.com/caseypt"&gt;Casey Thomas&lt;/a&gt;, &lt;a href="http://twitter.com/dannyjf"&gt;Dan Freiman&lt;/a&gt;, &lt;a href="http://twitter.com/ahinz"&gt;Adam Hinz&lt;/a&gt;, and I build &lt;a href="http://lobbying.ph"&gt;Lobbying.ph&lt;/a&gt; as an entry in Code for America&amp;rsquo;s 2012 Civic Hackathon in Philadelphia. The project won first place.&lt;/p&gt;
&lt;p&gt;Completed in about 5 hours, Lobbying.ph seeks to help Philadelphians access information about local lobbying efforts. As is reported on the site:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;Beginning in 2012, lobbyists and those paying for lobbyists in Philadelphia are required to register and file quarterly reports of their expenses with the &lt;a href="http://www.phila.gov/ethicsboard/lobbying.html"&gt;City of Philadelphia Board of Ethics&lt;/a&gt;. The Board of Ethics will make the data available on a regular basis. This application seeks to catalog that data, make it more accesible, and host visualizations to help citizens better understand the influence of lobbying in Philadelphia.&amp;rdquo;&lt;/p&gt;</description></item></channel></rss>