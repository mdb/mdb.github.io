<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ansible on Mike Ball</title><link>/tags/ansible/</link><description>Recent content in Ansible on Mike Ball</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Sun, 29 Nov 2020 00:00:00 +0000</lastBuildDate><atom:link href="/tags/ansible/index.xml" rel="self" type="application/rss+xml"/><item><title>Testing Ansible Roles With Docker-in-Docker</title><link>/blog/testing-ansible-roles-with-docker-in-docker/</link><pubDate>Sun, 29 Nov 2020 00:00:00 +0000</pubDate><guid>/blog/testing-ansible-roles-with-docker-in-docker/</guid><description>&lt;p&gt;&lt;em&gt;A brief guide and reference example explaining a technique for using Molecule and a Docker-in-Docker dev/test environment to test Ansible roles&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id="problem"&gt;Problem&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://www.ansible.com/"&gt;Ansible&lt;/a&gt; encourages the use of &lt;a href="https://github.com/ansible-community/molecule"&gt;Molecule&lt;/a&gt; to test Ansible roles &amp;ldquo;against multiple instances, operating systems and distributions, virtualization providers, test frameworks, and testing scenarios.&amp;rdquo; &lt;a href="https://molecule.readthedocs.io/en/latest/getting-started.html"&gt;Molecule documentation&lt;/a&gt; offers an overview of how to get started, including how to use &lt;a href="https://docker.io"&gt;Docker&lt;/a&gt; as the test driver provider, as well as how to use Ansible as the &lt;a href="https://molecule.readthedocs.io/en/latest/configuration.html#verifier"&gt;Molecule verifier&lt;/a&gt;. But what if you&amp;rsquo;d like to &lt;em&gt;also&lt;/em&gt; use Docker as your development environment, thus avoiding the need to install any dependencies — Python, Ansible, Molecule, etc. — beyond Docker itself? Or what if the relevant CI/CD pipeline steps run in a container, as is the case with a &lt;a href="https://concourse-ci.org/tasks.html"&gt;Concourse task&lt;/a&gt;, for example?&lt;/p&gt;</description></item><item><title>Using wget over Ansible's get_url</title><link>/blog/using-wget-over-ansibles-get_url/</link><pubDate>Wed, 23 Dec 2015 00:00:00 +0000</pubDate><guid>/blog/using-wget-over-ansibles-get_url/</guid><description>&lt;p&gt;Problem: In provisioning a server, your Ansible playbook needs to download files from a URL behinded authentication, such as a private GitHub repository. In Ansible 2.0, Ansible&amp;rsquo;s &lt;a href=""&gt;get_url&lt;/a&gt; supports custom headers — such as &lt;code&gt;Authorization&lt;/code&gt; — but pre-2.0 Ansible does not.&lt;/p&gt;
&lt;p&gt;Solution: Use &lt;code&gt;wget&lt;/code&gt;, a &lt;code&gt;wgetrc&lt;/code&gt;, and &lt;code&gt;ansible-vault&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Step 1: Generate a &lt;a href="https://github.com/settings/tokens"&gt;GitHub access token&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Step 2: Store the token in an Ansible &lt;code&gt;group_var&lt;/code&gt; at &lt;code&gt;your_playbook_dir/group_vars/all&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;github_token&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;your access token value&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Step 3: Use &lt;code&gt;ansible-vault&lt;/code&gt; to encrypt your &lt;code&gt;github_token&lt;/code&gt;; enter a password at the prompt:&lt;/p&gt;</description></item><item><title>JSConf 2015: Headless Testing Against Real Web Browsers</title><link>/blog/jsconf-2015-headless-testing-against-real-web-browsers/</link><pubDate>Wed, 27 May 2015 00:00:00 +0000</pubDate><guid>/blog/jsconf-2015-headless-testing-against-real-web-browsers/</guid><description>&lt;p&gt;I spoke at &lt;a href="http://2015.jsconf.us"&gt;JSConf 2015&lt;/a&gt; about how to test Google Polymer web components against real web browsers in a headless Linux using Xvfb.&lt;/p&gt;
&lt;p&gt;My talk offered background on my philosophy, why some software requires tests be run against a real GUI, and also covered a basic introduction to Xvfb, or X Virtual Frame Buffer. I also demo&amp;rsquo;d &lt;a href="http://github.com/mdb/polymer-testing-box"&gt;polymer-testing-box&lt;/a&gt;, a basic reference implementation illustrating how to provision an Ubuntu VM with all the prerequisites necessary to headlessly run Google Polymer web-component-tester tests against Chrome and Firefox.&lt;/p&gt;</description></item></channel></rss>